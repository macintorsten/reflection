<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sample Manager - Create</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .container { max-width: 800px; }
        button[type="submit"] { width: 100%; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìù Sample Manager</h1>
        
        <nav class="nav">
            <a href="index.html">Create New</a>
            <a href="list.html">View All</a>
        </nav>

        <div class="card">
            <h2>Create New Sample</h2>
            
            <form id="sampleForm">
                <div class="form-group">
                    <label for="text">Text *</label>
                    <input 
                        type="text" 
                        id="text" 
                        name="text" 
                        required 
                        minlength="3" 
                        maxlength="100"
                        placeholder="Enter text (3-100 characters)">
                    <small>Between 3 and 100 characters</small>
                </div>

                <div class="form-group">
                    <label for="number">Number *</label>
                    <input 
                        type="number" 
                        id="number" 
                        name="number" 
                        required 
                        min="0" 
                        max="1000"
                        step="1"
                        placeholder="Enter number (0-1000)">
                    <small>Integer between 0 and 1000</small>
                </div>

                <div class="form-group">
                    <label for="status">Status *</label>
                    <select id="status" name="status" required>
                        <option value="">-- Select Status --</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>

                <button type="submit">Create Sample</button>
            </form>

            <div id="message" class="message"></div>
        </div>
    </div>

    <script>
        const form = document.getElementById('sampleForm');
        const messageDiv = document.getElementById('message');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // HTML5 validation already handled by browser
            const formData = new FormData(form);
            const data = {
                text: formData.get('text'),
                number: parseInt(formData.get('number'), 10),
                status: formData.get('status'),
                extras: null
            };

            const button = form.querySelector('button[type="submit"]');
            button.disabled = true;
            button.textContent = 'Creating...';

            try {
                const response = await fetch('/api/samples', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                messageDiv.className = 'message';
                
                if (response.ok) {
                    messageDiv.classList.add('success', 'show');
                    messageDiv.textContent = '‚úì Sample created successfully!';
                    form.reset();
                } else {
                    const error = await response.json();
                    messageDiv.classList.add('error', 'show');
                    messageDiv.textContent = '‚úó Error: ' + (error.message || 'Failed to create sample');
                }
            } catch (error) {
                messageDiv.className = 'message error show';
                messageDiv.textContent = '‚úó Network error: ' + error.message;
            } finally {
                button.disabled = false;
                button.textContent = 'Create Sample';
            }
        });
    </script>
</body>
</html>
